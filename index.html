<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>P1 - Coffee Sales</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <div id="option">
    <input name="changeButton" 
           type="button" 
           value="Average Cost" 
           onclick="Cost()" />
  </div>
  <div id="option">
    <input name="changeButton" 
           type="button" 
           value="Average Debt" 
           onclick="Debt()" />
  </div>
  <div id="option">
    <input name="changeButton" 
           type="button" 
           value="Average Earnings" 
           onclick="Earnings()" />
  </div>
  <div id="option">
    <input name="changeButton" 
           type="button" 
           value="Average Family Income" 
           onclick="Fam()" />
  </div>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>
    var margin = {top: 60, right: 100, bottom: 40, left: 80},
        width = 470 - margin.left - margin.right,
        height = 680 - margin.top - margin.bottom;


    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1)
    var y = d3.scaleLinear().range([height, 0]);

    var svg = d3.select("body")
        .append("svg")
        .style("width", width + margin.left + margin.right + "px")
        .style("height", height + margin.top + margin.bottom + "px")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform","translate(" + margin.left + "," + margin.top + ")")
        .attr("class", "svg");

    d3.csv("colleges.csv", function(colleges) {
      colleges.forEach(function(d) {
        d["Average Cost"] = +d["Average Cost"];
        d["Mean Earnings"] = +d["Mean Earnings 8 years After Entry"];
        d["Median Debt on Grad"] = +d["Median Debt on Graduation"];
        d["Average Family Income"] = +d["Average Family Income"];
      });

      var privateVspublicCost = d3.nest()
      .key(function(d) { return d.Control; })
      .rollup(function(v) { return d3.mean(v, function(d) { return d["Average Cost"]; }); }) // tuition?
      .entries(colleges);
      
      console.log(privateVspublicCost);

        x.domain(privateVspublicCost.map(function(d) { return d.key; }));
        y.domain([0, d3.max(privateVspublicCost, function(d) { return d.value; })]);

        var xaxis = svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "x axis")
            .call(d3.axisBottom(x)
                .tickSize(0, 0)
                .tickSizeInner(0)
                .tickPadding(3));

        svg.append("text")
            .attr("y", height + 30)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Control")
            .attr("class", "x axis label");

        svg.append("text")
            .attr("y", 0 - 10)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Private Vs Public Colleges")
            .attr("class", "x axis label");

        var yaxis = svg.append("g")
            .attr("class", "y axis")
            .call(d3.axisLeft(y)
                .ticks(5)
                .tickSizeInner(0)
                .tickPadding(6)
                .tickSize(3, 3));

        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - 70)
            .attr("x", 0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Cost per Semester (USD)")
            .attr("class", "y axis label");
          
        svg.selectAll(".rect")
            .data(privateVspublicCost)
            .enter()
            .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.key); })
                .attr("y", function(d) { return y(d.value); })
                .attr("fill", '#008080')
                .attr("width", x.bandwidth())
                .attr("height", function(d) { return height - y(d.value); });
    })

  function Cost() {
    var rem = d3.select("svg").remove();
    var margin = {top: 60, right: 100, bottom: 40, left: 80},
        width = 470 - margin.left - margin.right,
        height = 680 - margin.top - margin.bottom;


    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1)
    var y = d3.scaleLinear().range([height, 0]);

    var svg = d3.select("body")
        .append("svg")
        .style("width", width + margin.left + margin.right + "px")
        .style("height", height + margin.top + margin.bottom + "px")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform","translate(" + margin.left + "," + margin.top + ")")
        .attr("class", "svg");

    d3.csv("colleges.csv", function(colleges) {
      colleges.forEach(function(d) {
        d["Average Cost"] = +d["Average Cost"];
        d["Mean Earnings"] = +d["Mean Earnings 8 years After Entry"];
        d["Median Debt on Grad"] = +d["Median Debt on Graduation"];
        d["Average Family Income"] = +d["Average Family Income"];
      });

      var privateVspublicCost = d3.nest()
      .key(function(d) { return d.Control; })
      .rollup(function(v) { return d3.mean(v, function(d) { return d["Average Cost"]; }); }) // tuition?
      .entries(colleges);
      
      console.log(privateVspublicCost);

        x.domain(privateVspublicCost.map(function(d) { return d.key; }));
        y.domain([0, d3.max(privateVspublicCost, function(d) { return d.value; })]);

        var xaxis = svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "x axis")
            .call(d3.axisBottom(x)
                .tickSize(0, 0)
                .tickSizeInner(0)
                .tickPadding(3));

        svg.append("text")
            .attr("y", height + 30)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Control")
            .attr("class", "x axis label");

        svg.append("text")
            .attr("y", 0 - 10)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Private Vs Public Colleges")
            .attr("class", "x axis label");

        var yaxis = svg.append("g")
            .attr("class", "y axis")
            .call(d3.axisLeft(y)
                .ticks(5)
                .tickSizeInner(0)
                .tickPadding(6)
                .tickSize(3, 3));

        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - 70)
            .attr("x", 0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Cost per Semester (USD)")
            .attr("class", "y axis label");
          
        svg.selectAll(".rect")
            .data(privateVspublicCost)
            .enter()
            .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.key); })
                .attr("y", function(d) { return y(d.value); })
                .attr("fill", '#008080')
                .attr("width", x.bandwidth())
                .attr("height", function(d) { return height - y(d.value); });
    })
  }

  function Earnings() {

    // Select the section we want to apply our changes to
    var rem = d3.select("svg").remove();

    var margin = {top: 60, right: 100, bottom: 40, left: 80},
        width = 470 - margin.left - margin.right,
        height = 680 - margin.top - margin.bottom;


    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1)
    var y = d3.scaleLinear().range([height, 0]);

    var svg = d3.select("body")
      .append("svg")
      .style("width", width + margin.left + margin.right + "px")
      .style("height", height + margin.top + margin.bottom + "px")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform","translate(" + margin.left + "," + margin.top + ")")
      .attr("class", "svg");

    // Get the data again
    d3.csv("colleges.csv", function(colleges) {
      colleges.forEach(function(d) {
        d["Mean Earnings"] = +d["Mean Earnings 8 years After Entry"];
      });

      var privateVspublicEarn = d3.nest()
      .key(function(d) { return d.Control; })
      .rollup(function(v) { return d3.mean(v, function(d) { return d["Mean Earnings"]; }); }) // tuition?
      .entries(colleges);
      console.log(privateVspublicEarn);

      // Scale the range of the data again 
      x.domain(privateVspublicEarn.map(function(d) { return d.key; }));
      y.domain([0, d3.max(privateVspublicEarn, function(d) { return d.value; })]);

      var xaxis = svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "x axis")
            .call(d3.axisBottom(x)
                .tickSize(0, 0)
                .tickSizeInner(0)
                .tickPadding(3));

        svg.append("text")
            .attr("y", height + 30)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Control")
            .attr("class", "x axis label");

        svg.append("text")
            .attr("y", 0 - 10)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Private Vs Public Colleges")
            .attr("class", "x axis label");

        var yaxis = svg.append("g")
            .attr("class", "y axis")
            .call(d3.axisLeft(y)
                .ticks(5)
                .tickSizeInner(0)
                .tickPadding(6)
                .tickSize(3, 3));

        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - 70)
            .attr("x", 0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Mean Earnings 8 years After Entry (USD)")
            .attr("class", "y axis label");
          
        svg.selectAll(".rect")
            .data(privateVspublicEarn)
            .enter()
            .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.key); })
                .attr("y", function(d) { return y(d.value); })
                .attr("fill", '#008080')
                .attr("width", x.bandwidth())
                .attr("height", function(d) { return height - y(d.value); });      

    });
  }
  function Debt() {

    // Select the section we want to apply our changes to
    var rem = d3.select("svg").remove();

    var margin = {top: 60, right: 100, bottom: 40, left: 80},
        width = 470 - margin.left - margin.right,
        height = 680 - margin.top - margin.bottom;


    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1)
    var y = d3.scaleLinear().range([height, 0]);

    var svg = d3.select("body")
      .append("svg")
      .style("width", width + margin.left + margin.right + "px")
      .style("height", height + margin.top + margin.bottom + "px")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform","translate(" + margin.left + "," + margin.top + ")")
      .attr("class", "svg");

    // Get the data again
    d3.csv("colleges.csv", function(colleges) {
      colleges.forEach(function(d) {
        d["Median Debt on Grad"] = +d["Median Debt on Graduation"];
      });

      var privateVspublicDebt = d3.nest()
      .key(function(d) { return d.Control; })
      .rollup(function(v) { return d3.mean(v, function(d) { return d["Median Debt on Grad"]; }); }) // tuition?
      .entries(colleges);
      console.log(privateVspublicDebt);

      // Scale the range of the data again 
      x.domain(privateVspublicDebt.map(function(d) { return d.key; }));
      y.domain([0, d3.max(privateVspublicDebt, function(d) { return d.value; })]);

      var xaxis = svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "x axis")
            .call(d3.axisBottom(x)
                .tickSize(0, 0)
                .tickSizeInner(0)
                .tickPadding(3));

        svg.append("text")
            .attr("y", height + 30)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Control")
            .attr("class", "x axis label");

        svg.append("text")
            .attr("y", 0 - 10)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Private Vs Public Colleges")
            .attr("class", "x axis label");

        var yaxis = svg.append("g")
            .attr("class", "y axis")
            .call(d3.axisLeft(y)
                .ticks(5)
                .tickSizeInner(0)
                .tickPadding(6)
                .tickSize(3, 3));

        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - 70)
            .attr("x", 0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Debt upon Graduation (USD)")
            .attr("class", "y axis label");
          
        svg.selectAll(".rect")
            .data(privateVspublicDebt)
            .enter()
            .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.key); })
                .attr("y", function(d) { return y(d.value); })
                .attr("fill", '#008080')
                .attr("width", x.bandwidth())
                .attr("height", function(d) { return height - y(d.value); });      
    
    });
  }
  function Fam() {

    // Select the section we want to apply our changes to
    var rem = d3.select("svg").remove();

    var margin = {top: 60, right: 100, bottom: 40, left: 80},
        width = 470 - margin.left - margin.right,
        height = 680 - margin.top - margin.bottom;


    var x = d3.scaleBand().rangeRound([0, width]).padding(0.1)
    var y = d3.scaleLinear().range([height, 0]);

    var svg = d3.select("body")
      .append("svg")
      .style("width", width + margin.left + margin.right + "px")
      .style("height", height + margin.top + margin.bottom + "px")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform","translate(" + margin.left + "," + margin.top + ")")
      .attr("class", "svg");

    // Get the data again
    d3.csv("colleges.csv", function(colleges) {
      colleges.forEach(function(d) {
        d["Average Family Income"] = +d["Average Family Income"];
      });

      var privateVspublicFam = d3.nest()
      .key(function(d) { return d.Control; })
      .rollup(function(v) { return d3.mean(v, function(d) { return d["Average Family Income"]; }); }) // tuition?
      .entries(colleges);
      console.log(privateVspublicFam);

      // Scale the range of the data again 
      x.domain(privateVspublicFam.map(function(d) { return d.key; }));
      y.domain([0, d3.max(privateVspublicFam, function(d) { return d.value; })]);

      var xaxis = svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .attr("class", "x axis")
            .call(d3.axisBottom(x)
                .tickSize(0, 0)
                .tickSizeInner(0)
                .tickPadding(3));

        svg.append("text")
            .attr("y", height + 30)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Control")
            .attr("class", "x axis label");

        svg.append("text")
            .attr("y", 0 - 10)
            .attr("x", width/2)
            .attr("dx", "1em")
            .style("text-anchor", "middle")
            .text("Private Vs Public Colleges")
            .attr("class", "x axis label");

        var yaxis = svg.append("g")
            .attr("class", "y axis")
            .call(d3.axisLeft(y)
                .ticks(6)
                .tickSizeInner(0)
                .tickPadding(6)
                .tickSize(3, 3));

        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 0 - 70)
            .attr("x", 0 - (height / 2))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Average Family Income (USD)")
            .attr("class", "y axis label");
          
        svg.selectAll(".rect")
            .data(privateVspublicFam)
            .enter()
            .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.key); })
                .attr("y", function(d) { return y(d.value); })
                .attr("fill", '#008080')
                .attr("width", x.bandwidth())
                .attr("height", function(d) { return height - y(d.value); });      
    
    });
  }
    </script>
</body>
</html>
